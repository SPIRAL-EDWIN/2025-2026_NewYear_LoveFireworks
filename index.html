<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026: To My Love</title>
    <!-- 引入高格调字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@200;400;600&display=swap" rel="stylesheet">
    <style>
        /* ================= 基础设置 ================= */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #050505; /* 极深的夜空黑 */
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* ================= UI 层布局 ================= */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* === 照片容器 === */
        #photo-container {
            position: absolute;
            top: 8%; /* 稍微靠上，留给倒计时空间 */
            width: 85%;
            max-width: 700px;
            aspect-ratio: 16/9;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 15;
        }

        .memory-photo {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1); 
            opacity: 0; 
            animation: fadeIn 0.4s forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }

        /* === 启动按钮 (样式调整以适应长文本) === */
        #start-btn {
            pointer-events: auto;
            padding: 1.5rem 2rem; /* 左右padding稍微减小以容纳长句 */
            max-width: 80%;       /* 限制最大宽度 */
            font-size: 1rem;      /* 字体稍微调小一点点 */
            line-height: 1.6;     /* 增加行高 */
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            border-radius: 2px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            text-transform: uppercase;
            letter-spacing: 2px;  /* 稍微减小字间距 */
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            font-family: 'Montserrat', sans-serif;
            font-weight: 200;
            text-align: center;   /* 确保多行文本居中 */
        }
        
        #start-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            letter-spacing: 3px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
        }

        /* === 倒计时 === */
        #countdown {
            position: absolute;
            bottom: 12%;
            font-size: 12vw;
            font-weight: 100;
            color: rgba(255, 255, 255, 0.85);
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            font-variant-numeric: tabular-nums;
            display: none;
            z-index: 20;
            letter-spacing: -2px;
        }

        /* === 最终浪漫文字区域 === */
        #message-container {
            position: absolute;
            top: 52%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0;
            width: 90%;
            max-width: 1000px;
            z-index: 30;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        /* 主标题: Happy 2026 (增加呼吸光效) */
        .msg-title {
            font-family: 'Great Vibes', cursive;
            font-size: 18vw; 
            background: linear-gradient(to bottom, #fbf5b7, #bf953f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            /* 初始阴影 */
            text-shadow: 0 0 30px rgba(191, 149, 63, 0.3);
            margin: 0 0 20px 0;
            line-height: 1;
            padding-bottom: 10px;
            /* 引入呼吸动画 */
            animation: glow 3s infinite ease-in-out;
        }

        @keyframes glow {
            0%, 100% {
                filter: drop-shadow(0 0 10px rgba(191, 149, 63, 0.3));
            }
            50% {
                filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.6));
            }
        }

        /* 提问: Are You Ready... */
        .msg-question {
            font-family: 'Montserrat', sans-serif;
            font-size: 3vw;
            font-weight: 200;
            color: #fff;
            letter-spacing: 2px;
            text-transform: none; 
            margin-bottom: 30px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        /* 承诺: LOVE YOU (修改后) */
        .msg-love {
            font-family: 'Montserrat', sans-serif;
            font-size: 4vw;
            font-weight: 600; 
            color: #fff;
            letter-spacing: 6px;
            text-transform: uppercase;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
        }

        /* 署名: From Your Love... */
        .msg-sign {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5vw;
            font-weight: 200;
            font-style: italic;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 10px;
        }

        /* 移动端字体大小修正 */
        @media (max-width: 768px) {
            .msg-title { font-size: 80px; }
            .msg-question { font-size: 18px; letter-spacing: 1px; }
            .msg-love { font-size: 24px; letter-spacing: 3px; }
            .msg-sign { font-size: 14px; }
            #countdown { font-size: 80px; }
            #start-btn { font-size: 0.9rem; padding: 1.2rem 1.5rem; }
        }

    </style>
</head>
<body>
    <canvas id="fireworks"></canvas>
    
    <div id="ui-layer">
        <div id="photo-container">
            <img id="current-photo" class="memory-photo" src="" alt="Memory">
        </div>

        <button id="start-btn">READY TO REVIEW AND START YOUR JOURNEY WITH ME?</button>
        <div id="countdown"></div>
        
        <div id="message-container">
            <div class="msg-title">Happy 2026</div>
            <div class="msg-question">Are You Ready To Start The Journey With Me?</div>
            <div class="msg-love">LOVE YOU</div>
            <div class="msg-sign">From Your Love, Edwin.</div>
        </div>
    </div>

    <script>
        // ================= 配置区域 (请在此处替换你的照片) =================
        const CONFIG = {
            photos: [
                'https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=800', 
                'https://images.unsplash.com/photo-1516589178581-a70ce6d55b4b?q=80&w=800', 
                'https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=800', 
                'https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=800',
                'https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=800'
            ],
            duration: 60 // 倒计时秒数
        };

        // ================= 核心变量 =================
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        let width, height;
        
        // 粒子容器
        let fireworks = [];
        let particles = [];
        
        // 状态
        let startTime;
        let isRunning = false;
        let isCelebration = false; 
        let bigFirework = null; // 专属变量：定情烟花

        // DOM 缓存
        const ui = {
            btn: document.getElementById('start-btn'),
            count: document.getElementById('countdown'),
            photoBox: document.getElementById('photo-container'),
            photoImg: document.getElementById('current-photo'),
            msgBox: document.getElementById('message-container')
        };

        // ================= 屏幕适配 =================
        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }
        window.addEventListener('resize', resize);
        resize();

        // ================= 物理系统 =================
        
        // 辅助：生成随机颜色
        function getRandomColor(isBig) {
            if (isBig) return '255, 215, 0'; // 纯金
            const r = Math.random();
            if (r < 0.3) return '255, 215, 0'; // 金
            if (r < 0.6) return '255, 105, 180'; // 热粉
            if (r < 0.8) return '255, 50, 50'; // 红
            return '135, 206, 250'; // 浅蓝点缀
        }

        class Firework {
            constructor(sx, sy, tx, ty, isBig = false) {
                this.x = sx;
                this.y = sy;
                // 记录起点和终点，用于大烟花的插值计算
                this.startY = sy;
                this.targetY = ty;
                
                this.tx = tx;
                this.ty = ty;
                this.isBig = isBig;
                
                // 普通烟花的物理参数
                this.distanceToTarget = Math.hypot(tx - sx, ty - sy);
                this.distanceTraveled = 0;
                this.angle = Math.atan2(ty - sy, tx - sx);
                this.speed = Math.random() * 2 + 3; // 普通烟花速度
                this.color = getRandomColor(isBig);
                
                this.dead = false;
            }

            update(remainingTime) {
                if (this.isBig) {
                    // === 定情烟花特殊逻辑 (时间映射) ===
                    let progress = 1 - (remainingTime / 2);
                    if (progress < 0) progress = 0;
                    if (progress > 1) progress = 1;

                    // 使用缓动函数 easeOutQuad 模拟减速
                    const ease = 1 - Math.pow(1 - progress, 2); 

                    // 严格按照进度计算位置
                    this.y = this.startY + (this.targetY - this.startY) * ease;
                    this.x = width / 2; // 保持居中

                    // 到了0秒，强制爆炸
                    if (remainingTime <= 0) {
                        this.explode();
                        this.dead = true;
                    }
                } else {
                    // === 普通烟花逻辑 ===
                    const vx = Math.cos(this.angle) * this.speed;
                    const vy = Math.sin(this.angle) * this.speed;
                    this.x += vx;
                    this.y += vy;
                    this.distanceTraveled += this.speed;
                    
                    if (this.distanceTraveled >= this.distanceToTarget) {
                        this.explode();
                        this.dead = true;
                    }
                }
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.isBig ? 6 : 2, 0, Math.PI * 2);
                ctx.fillStyle = `rgb(${this.color})`;
                ctx.fill();
                
                // 拖尾
                if (this.isBig) {
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x, this.y + 30); 
                    ctx.strokeStyle = `rgba(${this.color}, 0.5)`;
                    ctx.lineWidth = 4;
                    ctx.stroke();
                }
            }

            explode() {
                // 爆炸后的粒子数量
                const count = this.isBig ? 800 : Math.random() * 50 + 50; 
                for (let i = 0; i < count; i++) {
                    particles.push(new Particle(this.x, this.y, this.color, this.isBig));
                }
            }
        }

        class Particle {
            constructor(x, y, color, isBig) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.alpha = 1;
                
                const angle = Math.random() * Math.PI * 2;
                // 爆炸力度
                const velocity = isBig ? Math.random() * 25 + 2 : Math.random() * 6 + 1;
                
                this.vx = Math.cos(angle) * velocity;
                this.vy = Math.sin(angle) * velocity;
                
                this.friction = 0.95; // 空气阻力
                this.gravity = 0.05;  // 重力
                // 消失速度: 大烟花消失得更慢
                this.decay = isBig ? Math.random() * 0.005 + 0.003 : Math.random() * 0.02 + 0.01;
            }

            update() {
                this.vx *= this.friction;
                this.vy *= this.friction;
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= this.decay;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = `rgb(${this.color})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 1.5, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        // ================= 逻辑循环 =================

        function loop() {
            requestAnimationFrame(loop);

            // 背景清理 (带拖尾效果)
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; 
            ctx.fillRect(0, 0, width, height);
            ctx.globalCompositeOperation = 'source-over';

            if (!isRunning) return;

            const now = Date.now();
            const elapsed = (now - startTime) / 1000;
            const remaining = CONFIG.duration - elapsed;

            // 1. 照片逻辑
            if (remaining > 0) {
                // 阶段A: 60s - 10s (每1秒一张)
                if (remaining > 10) {
                    ui.photoBox.style.display = 'flex';
                    ui.photoBox.style.opacity = 1;
                    const index = Math.floor(elapsed) % CONFIG.photos.length;
                    if (ui.photoImg.getAttribute('data-index') != index) {
                        ui.photoImg.src = CONFIG.photos[index];
                        ui.photoImg.setAttribute('data-index', index);
                        ui.photoImg.style.animation = 'none';
                        ui.photoImg.offsetHeight;
                        ui.photoImg.style.animation = 'fadeIn 0.9s forwards';
                    }
                } 
                // 阶段B: 10s - 2s (每0.5秒一张)
                else if (remaining > 2) {
                    const fastOffset = Math.floor((elapsed - (CONFIG.duration - 10)) * 2);
                    const totalIndex = (50 + fastOffset) % CONFIG.photos.length;
                    if (ui.photoImg.getAttribute('data-index') != totalIndex) {
                        ui.photoImg.src = CONFIG.photos[totalIndex];
                        ui.photoImg.setAttribute('data-index', totalIndex);
                        ui.photoImg.style.animation = 'none';
                        ui.photoImg.offsetHeight;
                        ui.photoImg.style.animation = 'fadeIn 0.4s forwards';
                    }
                } 
                // 阶段C: 最后2秒 (照片隐去)
                else {
                    ui.photoBox.style.transition = "opacity 0.5s";
                    ui.photoBox.style.opacity = 0;
                }

                // 2. 倒计时文字逻辑
                if (remaining > 10) {
                    ui.count.innerText = Math.floor(remaining);
                } else {
                    ui.count.innerText = remaining.toFixed(1);
                    ui.count.style.color = '#ff4d6d'; // 倒计时变红
                }

                // 3. 召唤定情烟花 (倒数2秒时生成)
                if (remaining <= 2 && !bigFirework) {
                    // 从底部中间，飞到顶部20%的位置
                    bigFirework = new Firework(width / 2, height, width / 2, height * 0.2, true);
                    fireworks.push(bigFirework);
                }

            } else {
                // === 时间到 (0秒) ===
                if (!isCelebration) {
                    isCelebration = true; // 开启狂欢模式
                    ui.count.style.display = 'none'; // 隐藏倒计时
                    
                    // 显示最终文字 (淡入)
                    setTimeout(() => {
                        ui.msgBox.style.transition = "opacity 2.5s ease";
                        ui.msgBox.style.opacity = 1;
                    }, 200); 
                }
            }

            // === 狂欢模式：持续放烟花 ===
            if (isCelebration) {
                // 每帧有 10% 概率发射一枚新烟花
                if (Math.random() < 0.1) {
                    const sx = Math.random() * width; 
                    const sy = height;
                    const tx = Math.random() * width; 
                    const ty = Math.random() * (height * 0.6); 
                    fireworks.push(new Firework(sx, sy, tx, ty, false));
                }
            }

            // 更新绘制
            fireworks.forEach((fw, i) => {
                fw.update(remaining);
                fw.draw();
                if (fw.dead) fireworks.splice(i, 1);
            });

            particles.forEach((p, i) => {
                p.update();
                p.draw();
                if (p.alpha <= 0) particles.splice(i, 1);
            });
        }

        // ================= 交互 =================
        ui.btn.addEventListener('click', () => {
            // UI 切换
            ui.btn.style.opacity = 0;
            setTimeout(() => ui.btn.style.display = 'none', 600);
            
            ui.count.style.display = 'block';
            
            // 预加载图片
            CONFIG.photos.forEach(src => {
                const i = new Image();
                i.src = src;
            });

            startTime = Date.now();
            isRunning = true;
            loop();
        });

    </script>
</body>
</html>